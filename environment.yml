name: misa-code-py39
channels:
  - conda-forge
  - defaults                 # keep for system libs

dependencies:
  # ── core interpreter ──────────────────────────────────────────────────
  - python = 3.9
  - pip
  - wheel

  # ── compiled numerical / ML stack ─────────────────────────────────────
  - numpy              = 1.26.*      # last NumPy that supports 3.9
  - scipy              = 1.12.*
  - pandas             = 2.2.*
  - scikit-learn       = 1.4.*
  - scikit-image       = 0.22.*      # 0.23 requires ≥3.10
  - matplotlib         = 3.9.*
  - pillow
  - cython

  # ---- PyTorch / CUDA ---------------------------------------------------
  # comment out cudatoolkit + set pytorch cpuonly if you’re on CPU
  - cudatoolkit        = 11.8
  - pytorch            = 1.13.*
  - torchvision        = 0.14.*

  # ---- NLP stack --------------------------------------------------------
  - spacy              = 3.7.*       # brings modern cymem / srsly / blis

  # ---- essential system libs (un-pinned builds) ------------------------
  - openssl
  - libffi
  - zlib
  - sqlite
  - ncurses
  - readline

  # ── everything conda doesn’t package (or we prefer the wheel) ─────────
  - pip:
      # deep-learning audio (no conda py39 build)
      - torchaudio==0.12.*

      # unchanged pins that were already 3.9-ready
      - allennlp==2.10.*
      - allennlp-models==2.10.*
      - torch-geometric==2.0.4
      - torch-scatter==2.0.9
      - torch-sparse==0.6.12
      - torch-cluster==1.5.9
      - torch-spline-conv==1.2.1
      - transformers==4.26.*
      - tokenizers>=0.14.0
      - sentencepiece>=0.1.99
      - requests>=2.31
      - tqdm>=4.67
      - jupyter
      - notebook
      - ipykernel
      - ipython
      - seaborn

      # lifted caps on very old wheels (now resolver chooses py39 builds)
      - cryptography>=42
      - cffi>=1.17
      - cymem>=2.0.8
      - srsly>=2.4
      - murmurhash>=1.0.9
      - preshed>=3.0
      - thinc>=8.2
      - blis>=0.9
      - pytz>=2023
      - protobuf>=3.20
      - ftfy>=5.8
      - h5py>=3.13
      - kiwisolver>=1.4
      - cycler>=0.12
      - joblib>=1.4
      - networkx>=2.8
      - nltk>=3.8
      - oauthlib>=3.2
      - packaging>=25
      - pyparsing>=3.2
      - urllib3>=2.2
      - werkzeug>=3

      # ---- long-tail pure-Python deps from your original list ----------
      - absl-py
      - alabaster
      - argparse
      - astor
      - astroid
      - atomicwrites
      - babel
      - backcall
      - bleach
      - boto
      - boto3
      - botocore
      - cachetools
      - catalogue
      - chardet
      - click
      - conllu
      - decorator
      - defusedxml
      - docopt
      - docutils
      - editdistance
      - entrypoints
      - filelock
      - flaky
      - flask
      - flask-cors
      - gast
      - gensim
      - gevent
      - google-auth
      - google-auth-oauthlib
      - google-pasta
      - googledrivedownloader
      - greenlet
      - grpcio
      - idna
      - imageio
      - imagesize
      - importlib-metadata
      - ipython-genutils
      - ipywidgets
      - isodate
      - isort
      - itsdangerous
      - jedi
      - jinja2
      - jmespath
      - json-lines
      - jsonlines
      - jsonnet
      - jsonpickle
      - jsonschema
      - jupyter-client
      - jupyter-console
      - jupyter-core
      - keras-applications
      - keras-preprocessing
      - lazy-object-proxy
      - markdown
      - markupsafe
      - mccabe
      - mistune
      - monotonic
      - more-itertools
      - nbconvert
      - nbformat
      - pandocfilters
      - parsimonious
      - parso
      - pexpect
      - pickleshare
      - pipreqs
      - plac
      - pluggy
      - plyfile
      - prometheus-client
      - prompt-toolkit
      - ptyprocess
      - py
      - pyasn1
      - pyasn1-modules
      - pyconll
      - pygments
      - pylint
      - pyrsistent
      - pytest
      - qtconsole
      - rdflib
      - regex
      - requests-oauthlib
      - responses
      - rsa
      - s3transfer
      - sacremoses
      - send2trash
      - smart-open
      - snowballstemmer
      - sphinx
      - sphinxcontrib-applehelp
      - sphinxcontrib-devhelp
      - sphinxcontrib-htmlhelp
      - sphinxcontrib-jsmath
      - sphinxcontrib-qthelp
      - sphinxcontrib-serializinghtml
      - sqlparse
      - tensorboard
      - tensorboardx
      - tensorflow-estimator
      - termcolor
      - terminado
      - testpath
      - tornado
      - traitlets
      - typed-ast
      - unidecode
      - validators
      - wcwidth
      - webencodings
      - widgetsnbextension
      - word2number
      - wrapt
      - yarg
      - zipp

