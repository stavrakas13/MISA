name: misa-code-py39
channel_priority: strict          # makes solver fast & deterministic
channels:
  - pytorch                       # Torch binaries (1.11/0.12/0.11 trio)
  - conda-forge
  - defaults

dependencies:
  # ── core interpreter ───────────────────────────────────────────────
  - python          =3.9
  - pip
  - wheel

  # ── numeric & plotting stack ───────────────────────────────────────
  - numpy           =1.26.*
  - scipy           =1.12.*
  - pandas          =2.2.*
  - scikit-learn    =1.4.*
  - scikit-image    =0.22.*        # 0.23+ drops Py 3.9 support
  - matplotlib      =3.9.*
  - pillow
  - cython

  # ── PyTorch ecosystem (CUDA 11.3 build) ────────────────────────────
  - cudatoolkit     =11.3          # comment out for CPU-only
  - pytorch         =1.11.*
  - torchvision     =0.12.*
  - torchaudio      =0.11.*

  # ── Modern NLP stack ───────────────────────────────────────────────
  - spacy           =3.7.*

  # ── low-level run-time libs we used to hard-pin to hashes ──────────
  - openssl
  - libffi
  - zlib
  - sqlite
  - ncurses
  - readline

  # ── anything Conda doesn’t package (or you always installed w/ pip) ─
  - pip:
      # core research libraries that depend on the Torch 1.11 ABI
      - allennlp==2.10.*
      - allennlp-models==2.10.*
      - torch-geometric==2.0.4
      - torch-scatter==2.0.9
      - torch-sparse==0.6.12
      - torch-cluster==1.5.9
      - torch-spline-conv==1.2.1

      # Hugging Face at a version accepted by AllenNLP
      - transformers==4.20.*
      - tokenizers>=0.14.0
      - sentencepiece>=0.1.99

      # utility & notebook stack (unchanged)
      - requests>=2.31
      - tqdm>=4.67
      - jupyter
      - notebook
      - ipykernel
      - ipython
      - seaborn

      # long-tail research helpers (exactly as you had them)
      - absl-py
      - alabaster
      - argparse
      - astor
      - astroid
      - atomicwrites
      - babel
      - backcall
      - bleach
      - boto
      - boto3
      - botocore
      - cachetools
      - catalogue
      - chardet
      - click
      - conllu
      - decorator
      - defusedxml
      - docopt
      - docutils
      - editdistance
      - entrypoints
      - filelock
      - flaky
      - flask
      - flask-cors
      - ftfy>=5.8
      - gast
      - gensim
      - gevent
      - google-auth
      - google-auth-oauthlib
      - google-pasta
      - googledrivedownloader
      - greenlet
      - grpcio
      - idna
      - imageio
      - imagesize
      - importlib-metadata
      - ipython-genutils
      - ipywidgets
      - isodate
      - isort
      - itsdangerous
      - jedi
      - jinja2
      - jmespath
      - json-lines
      - jsonlines
      - jsonnet
      - jsonpickle
      - jsonschema
      - jupyter-client
      - jupyter-console
      - jupyter-core
      - keras-applications
      - keras-preprocessing
      - lazy-object-proxy
      - markdown
      - markupsafe
      - mccabe
      - mistune
      - monotonic
      - more-itertools
      - nbconvert
      - nbformat
      - pandocfilters
      - parsimonious
      - parso
      - pexpect
      - pickleshare
      - pipreqs
      - plac
      - pluggy
      - plyfile
      - prometheus-client
      - prompt-toolkit
      - ptyprocess
      - py
      - pyasn1
      - pyasn1-modules
      - pyconll
      - pygments
      - pylint
      - pyrsistent
      - pytest
      - qtconsole
      - rdflib
      - regex
      - requests-oauthlib
      - responses
      - rsa
      - s3transfer
      - sacremoses
      - send2trash
      - smart-open
      - snowballstemmer
      - sphinx
      - sphinxcontrib-applehelp
      - sphinxcontrib-devhelp
      - sphinxcontrib-htmlhelp
      - sphinxcontrib-jsmath
      - sphinxcontrib-qthelp
      - sphinxcontrib-serializinghtml
      - sqlparse
      - tensorboard
      - tensorboardx
      - tensorflow-estimator
      - termcolor
      - terminado
      - testpath
      - tornado
      - traitlets
      - typed-ast
      - unidecode
      - validators
      - wcwidth
      - webencodings
      - widgetsnbextension
      - word2number
      - wrapt
      - yarg
      - zipp

